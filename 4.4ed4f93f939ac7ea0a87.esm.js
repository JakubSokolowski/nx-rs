(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{O6W4:function(t,e,r){"use strict";r.r(e);var n=r("r0ML"),c=r("cm/j"),i=r("sBvK"),o=r("BqyK");e.default=()=>{const t=Object(n.useRef)(c.a.new(100,50)),e=t.current.width(),r=t.current.height(),s=Object(n.useRef)(null),l=Object(n.useRef)(2),[u,d]=Object(n.useState)(null),a=t=>{t.beginPath(),t.strokeStyle="#CCCCCC";for(let n=0;n<=e;n++)t.moveTo(11*n+1,0),t.lineTo(11*n+1,11*r+1);for(let n=0;n<=r;n++)t.moveTo(0,11*n+1),t.lineTo(11*e+1,11*n+1);t.stroke()},h=(t,r)=>t*e+r,f=(t,e)=>{const r=1<<t%8;return(e[Math.floor(t/8)]&r)===r},b=n=>{const c=t.current.cells(),o=new Uint8Array(i.b.buffer,c,e*r/8);n.beginPath();for(let t=0;t<r;t++)for(let r=0;r<e;r++){const e=h(t,r);n.fillStyle=f(e,o)?"#000000":"#FFFFFF",n.fillRect(11*r+1,11*t+1,10,10)}n.stroke()},j=()=>null===u;Object(n.useEffect)(()=>{const t=s.current.getContext("2d");a(t),b(t)});const p=t=>{const n=s.current,c=n.getBoundingClientRect(),i=n.width/c.width*(t.clientX-c.left);return[Math.min(Math.floor(n.height/c.height*(t.clientY-c.top)/11),r-1),Math.min(Math.floor(i/11),e-1)]};return Object(o.jsxs)("div",{style:{padding:"10px",width:"100%"},children:[Object(o.jsx)("h4",{"data-test":"game-of-life-title",children:"Game of Life"}),Object(o.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(o.jsxs)("div",{children:["Click on cell to toggle. Ctrl + Click to insert ",Object(o.jsx)("a",{href:"https://conwaylife.com/wiki/Glider",children:"Glider"}),", Shift + click to insert ",Object(o.jsx)("a",{href:"https://conwaylife.com/wiki/Pulsar",children:"Pulsar"})]}),Object(o.jsx)("div",{style:{flexGrow:1}}),Object(o.jsx)("a",{href:"https://github.com/JakubSokolowski/nx-rs",children:"source code"})]}),Object(o.jsx)("div",{style:{height:"10px"}}),Object(o.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(o.jsx)("button",{onClick:()=>{j()?(()=>{const e=s.current.getContext("2d");let r,n=0;const c=(e,r)=>{r%l.current==0&&t.current.tick(),a(e),b(e)};n++,c(e,n);const i=()=>{n++,c(e,n),r=window.requestAnimationFrame(i),d(r)};i()})():(()=>{if(u){cancelAnimationFrame(u),d(null);const t=s.current.getContext("2d");a(t),b(t)}})()},children:j()?"Start":"Stop"}),Object(o.jsx)("div",{style:{width:"10px"}}),Object(o.jsx)("button",{onClick:()=>(()=>{const e=s.current.getContext("2d");t.current.reset(),a(e),b(e)})(),children:"Reset"}),Object(o.jsx)("div",{style:{width:"10px"}}),Object(o.jsx)("button",{onClick:()=>(()=>{const e=s.current.getContext("2d");t.current.random(.1),a(e),b(e)})(),children:"Random"}),Object(o.jsx)("div",{style:{width:"10px"}}),Object(o.jsx)("input",{type:"range",min:2,max:10,value:l.current,onChange:t=>l.current=Number.parseInt(t.target.value)})]}),Object(o.jsx)("div",{style:{height:"10px"}}),Object(o.jsx)("canvas",{onClick:e=>{e.ctrlKey?(e=>{const[r,n]=p(e),c=s.current.getContext("2d");t.current.glider(r,n),a(c),b(c)})(e):e.shiftKey?(e=>{const[r,n]=p(e),c=s.current.getContext("2d");t.current.pulsar(r,n),a(c),b(c)})(e):(e=>{const r=s.current.getContext("2d"),[n,c]=p(e);t.current.toggle_cell(n,c),a(r),b(r)})(e)},style:{width:"100%",height:"100%"},width:11*e+1,height:11*r+1,ref:s})]})}},Ua1F:function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"cm/j":function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return s})),r.d(e,"c",(function(){return l}));var n=r("sBvK");let c=new("undefined"==typeof TextDecoder?(0,t.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});c.decode();let i=null;Object.freeze({Dead:0,0:"Dead",Alive:1,1:"Alive"});class o{static __wrap(t){const e=Object.create(o.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();n.a(t)}width(){return n.m(this.ptr)>>>0}height(){return n.e(this.ptr)>>>0}size(){return n.j(this.ptr)>>>0}cells(){return n.c(this.ptr)}static new(t,e){var r=n.f(t,e);return o.__wrap(r)}random(t){n.h(this.ptr,t)}reset(){n.i(this.ptr)}tick(){n.k(this.ptr)}toggle_cell(t,e){n.l(this.ptr,t,e)}glider(t,e){n.d(this.ptr,t,e)}pulsar(t,e){n.g(this.ptr,t,e)}}const s="function"==typeof Math.random?Math.random:()=>{throw new Error("Math.random is not defined")};function l(t,e){throw new Error(function(t,e){return c.decode((null!==i&&i.buffer===n.b.buffer||(i=new Uint8Array(n.b.buffer)),i).subarray(t,t+e))}(t,e))}}).call(this,r("Ua1F")(t))},sBvK:function(t,e,r){"use strict";var n=r.w[t.i];t.exports=n,r("cm/j"),n.n()}}]);